@using WrpCcNocWeb.DatabaseContext
@using WrpCcNocWeb.Helpers

@{
    ViewData["Title"] = "Project View";
    Layout = "~/Views/Shared/_Layout.cshtml";

    WrpCcNocDbContext _db = new WrpCcNocDbContext();
    CcModAppProjectCommonDetail pcd = (CcModAppProjectCommonDetail)ViewData["ProjectCommonDetail"];
    CcModAppProject_31_IndvDetail projectindi = (CcModAppProject_31_IndvDetail)ViewData["ProjectIndvDetail31"];

    var prev_lang = int.Parse(ViewData["LanguageId"].ToString());
    var app_state_id = pcd.ApplicationStateId;
    var app_state = (string)ViewData["ApplicationState"];
    var is_complete_id = pcd.IsCompletedId;
    var review_cycle_no = pcd.ReviewCycleNo;

    var location = ViewData["ProjectLocationDetail"];
    var hrd = ViewData["HydroRegionDetail"];
    var hsd = ViewData["BDP2100HotSpotDetail"];
        
    var tof = ViewData["TypesOfFloodDetail"];    
    var dcd = ViewData["DrainageConditionDetail"];    

    var aodt = ViewData["AnalyzeOptionsDetail"];
    var dsd = ViewData["DesignSubmitDetail"];
    var efad = ViewData["EcoFinAnalysisDetail"];
    var eiad = ViewData["EiaDetailTemp"];
    var siad = ViewData["SiaDetailTemp"];

    var cnwpd = ViewData["CompatNWPDetail"];
    var cnwmpd = ViewData["CompatNWMPDetail"];
    var sdgd = ViewData["CompatSDGDetail"];
    var sdgid = ViewData["CompatSDGIndiDetail"];
    var bdp2100gd = ViewData["BDP2100GoalDetail"];
    var gpwmgtd = ViewData["GPWMGroupType"];

    //List<DataAnalysisControlComments> fdac = (List<DataAnalysisControlComments>)ViewData["FormCommentsListTemp"];

    long ProjectId = (long)ViewData["ProjectId"];
    long Project31IndvId = (long)ViewData["Project31IndvId"];
    long UserId = (long)ViewData["UserId"];
    int ProjectTypeId = (int)ViewData["ProjectTypeId"];
    var user_group_id = ViewData["UserLevel"].ToString();

    var sfn = ViewData["SignatureFileName"].ToString();
    var anbn = ViewData["ApplicantNameBn"].ToString();
    var anen = ViewData["ApplicantName"].ToString();
    var agne = ViewData["ApplicantGroupName"].ToString();
}

<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <input id="pProjectId" type="hidden" value="@ProjectId" />
                <input id="pProject31IndvId" type="hidden" value="@Project31IndvId" />
                <input id="pUserId" type="hidden" value="@UserId" />
                <input id="pProjectTypeId" type="hidden" value="@ProjectTypeId" />

                <div id="form-preview" class="form-preview container">
                    @{ await Html.RenderPartialAsync("preview/_1Header.cshtml",
                                new ViewDataDictionary(ViewData) {
                               { "FormLanguage", prev_lang },
                               { "PTID", ProjectTypeId }});
                    }

                    <br />

                    @{ await Html.RenderPartialAsync("preview/_2General.cshtml",
                            new ViewDataDictionary(ViewData) {
                            { "gProjectCommonDetail", pcd},
                            { "gProjectIndvDetail31", projectindi },
                            { "gProjectLocationDetail", location},
                            { "gFormLanguage", prev_lang },
                            { "gProjectTypeId", ProjectTypeId }});
                    }

                <table style="border: 1px solid #808080; table-layout: fixed; width: 100%;" border="1" cellpadding="1" cellspacing="0">
                    <tr style="background: #9d9b9b; font-weight: bold;">
                        <td colspan="3">
                            <h4>
                                @if (prev_lang == 1)
                                {<span>খ। কারিগরি তথ্য</span>}
                                else
                                {<span>B. Technical Information</span>}
                            </h4>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <h5>
                                @if (prev_lang == 1)
                                {<span>২.১ বেজলাইন সম্পর্কিত তথ্য বা অবস্থা পর্যালোচনা</span>}
                                else
                                {<span>2.1 Discussion about baseline related information or situation</span>}
                            </h5>
                        </td>
                    </tr>
                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>i. হাইড্রোলজিক্যাল অঞ্চল</span>}
                                else
                                {<span>i. Hydrological Region</span>}
                            </b>
                        </td>
                        <td>
                            <table style="border: 1px solid #808080; width: 100%; text-align: center;" border="1">
                                <tbody>@Html.Raw(hrd.ToString())</tbody>
                            </table>
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Hydrological Region', 'HydrologicalRegion');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>
                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>ii. বাংলাদেশ ব-দ্বীপ পরিকল্পনা-২১০০ হট স্পট</span>}
                                else
                                {<span>ii. Bangladesh Delta Plan 2100 Hot Spot</span>}
                            </b>
                        </td>
                        <td>
                            <ol>
                                @foreach (var bdphsd in (List<BDP2100HotSpotDetailTemp>)ViewData["BDP2100HotSpotDetail"])
                                {
                                    if (prev_lang == 1)
                                    {
                                        <li>@bdphsd.PlanNameBn</li>
                                    }
                                    else
                                    {
                                        <li>@bdphsd.PlanName</li>
                                    }
                                }
                            </ol>
                        </td>
                        <td style="word-break: break-all;">
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Bangladesh Delta Plan 2100 Hot Spot', 'BDP2100HotSpot');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>iii. হাইড্রোলজিক্যাল সিস্টেম</span> }
                                else
                                { <span>iii. Hydrological System</span>}
                            </b>
                        </td>
                        <td>                            
                            @{
                                var hysd = ViewData["HydroSystemDetail"];
                                await Html.RenderPartialAsync("controls/_HydrologicalSystemView.cshtml",
                                    new ViewDataDictionary(ViewData) {
                                            { "vFormLanguage", prev_lang },
                                            { "vHydroSystemDetail", hysd }});
                            }
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Hydrological System', 'HydrologicalSystem');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>iv. খাল, নদী এবং জলাভূমির মধ্যে সংযোগ</span> }
                                else
                                { <span>iv. Connectivity Amid Khals, River and Wetland</span>}
                            </b>
                        </td>
                        <td>@projectindi.ConnectivityAmidWaterland</td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Connectivity Amid Khals, River and Wetland', 'ConnectivityAmidWaterland');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>v. ক্যাচমেন্ট এলাকা (অববাহিকা) (হেক্টর)</span> }
                                else
                                { <span>v. Catchment Area (ha)</span>}
                            </b>
                        </td>
                        <td>@projectindi.CatchmentArea</td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Catchment Area (ha)', 'CatchmentArea');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>vi. বার্ষিক বৃষ্টিপাত (মি.মি.)</span>}
                                else
                                {<span>vi. Annual Rainfall (mm)</span>}
                            </b>
                        </td>
                        <td>
                            @{
                                var annualrainfall = ViewData["AnnualRainfallDetail"];
                                await Html.RenderPartialAsync("controls/_AnnualRainfallView.cshtml",
                                    new ViewDataDictionary(ViewData) {
                                            { "vFormLanguage", prev_lang },
                                            { "vAnnualRainfallDetail", annualrainfall }});
                            }
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Annual Rainfall', 'AnnualRainfallLastFiveYears');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>vii. বন্যায় সর্বোচ্চ পানির উচ্চতা (মিটার) (গত ৩০ বৎসরের মধ্যে)</span>}
                                else
                                {<span>vii. Highest Flood Level (m) (within last 30 years)</span>}
                            </b>
                        </td>
                        <td>
                            @{
                                var hfld = ViewData["HighestFloodLevelDetail"];
                                await Html.RenderPartialAsync("controls/_HighestFloodLevelView.cshtml",
                                    new ViewDataDictionary(ViewData) {
                                            { "vFormLanguage", prev_lang },
                                            { "vHighestFloodLevelDetail", hfld }});
                            }
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Highest Flood Level (m)', 'HighestFloodLevel');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>viii. সর্বোচ্চ পানির প্রবাহ (ডিসচার্জ) (কিউসেক)</span> }
                                else
                                { <span>viii. Maximum Discharge (m<sup>3</sup>/s)</span>}
                            </b>
                        </td>
                        <td>
                            @{
                                var mxdrg = ViewData["MaximumDischargeDetail"];
                                await Html.RenderPartialAsync("controls/_MaximumDischargeView.cshtml",
                                    new ViewDataDictionary(ViewData) {
                                            { "vFormLanguage", prev_lang },
                                            { "vMaximumDischargeDetail", mxdrg }});
                            }
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Maximum Discharge (m<sup>3</sup>/s)', 'MaximumDischarge');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>বন্যার ধরণ</span>}
                                else
                                {<span>Types of Flood</span>}
                            </b>
                        </td>
                        <td>
                            <ul>
                                @foreach (var tf in (List<TypesOfFloodTemp>)tof)
                                {
                                    if (prev_lang == 1)
                                    {
                                        <li>@tf.FloodTypeNameBn</li>
                                    }
                                    else
                                    {
                                        <li>@tf.FloodTypeName</li>
                                    }
                                }
                            </ul>
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Types of Flood', 'TypesOfFlood');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>ফ্লাড ফ্রিকোয়েন্সি এনালাইসিস; (সর্বোচ্চ পানির উচ্চতা, মিটার)</span>}
                                else
                                {<span>Flood Frequency Analysis (Maximum water level in Meter)</span>}
                            </b>
                        </td>
                        <td>
                            @{
                                var tfd = ViewData["FloodFrequencyDetail"];
                                await Html.RenderPartialAsync("controls/_FloodFrequencyAnalysisView.cshtml",
                                    new ViewDataDictionary(ViewData) {
                                            { "vFormLanguage", prev_lang },
                                            { "vFloodFrequencyDetail", tfd }});
                            }
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Flood Frequency Analysis', 'FloodFrequencyAnalysis');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>নিষ্কাশন (ড্রেইনেজ) ব্যবস্থা</span>}
                                else
                                {<span>Drainage Condition</span>}
                            </b>
                        </td>
                        <td>
                            @foreach (DrainageConditionlTemp dc in (List<DrainageConditionlTemp>)dcd)
                            {
                                if (prev_lang == 1)
                                {
                                    @dc.DrainageConditionBn
                                }
                                else
                                {
                                    @dc.DrainageCondition
                                }
                            }

                            <span>@projectindi.DrainageConditionOther</span>
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Drainage Condition', 'DrainageCondition');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>ভূপরিস্থ পানির গুনগত মান</span>}
                                else
                                {<span>Surface Water Quality</span>}
                            </b>
                        </td>
                        <td>
                            <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                <tr>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>লবনাক্ততা (পিপিএম)</span>}
                                        else
                                        {<span>Salinity (PPM)</span>}
                                    </th>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>ডিও (মি.গ্রা/লিটার)</span>}
                                        else
                                        {<span>DO (mg/l)</span>}
                                    </th>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>টি.ডি.এস</span>}
                                        else
                                        {<span>TDS</span>}
                                    </th>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>পিএইচ</span>}
                                        else
                                        {<span>pH</span>}
                                    </th>
                                </tr>
                                <tr>
                                    <td>@projectindi.WaterSalinity</td>
                                    <td>@projectindi.WaterDO</td>
                                    <td>@projectindi.WaterTDS</td>
                                    <td>@projectindi.WaterPhLevel</td>
                                </tr>
                            </table>
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Surface Water Quality', 'SurfaceWaterQuality');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>ভূমির ধরন (শতকরা)</span>}
                                else
                                {<span>Land Type (Percent)</span>}
                            </b>
                        </td>
                        <td>
                            <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                <tr>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>উচুঁ ভূমি <br />F<sub>0</sub> (০-৩০ সে.মি.)</span>}
                                        else
                                        {<span>High Land <br />F<sub>0</sub> (0-30 cm)</span>}
                                    </th>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>মধ্যম উচুঁ ভূমি <br />F<sub>1</sub> (৩০-৯০ সে.মি.)</span>}
                                        else
                                        {<span>Medium High Land <br />F<sub>1</sub> (30-90 cm)</span>}
                                    </th>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>মধ্যম নিচু ভূমি <br />F<sub>2</sub> (৯০-১৮০ সে.মি)</span>}
                                        else
                                        {<span>Medium Low Land <br />F<sub>2</sub> (90-180 cm)</span>}
                                    </th>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>নিচু ভূমি <br />F<sub>3</sub> (>১৮০-৩৬০ সে.মি.)</span>}
                                        else
                                        {<span>Low Land <br />F<sub>3</sub> (>180-360 cm</span>})
                                    </th>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>অত্যন্ত নিচু জমি <br />F<sub>4</sub> (>৩৬০ সে.মি)</span>}
                                        else
                                        {<span>Very Low Land <br />F<sub>4</sub> (>360 cm)</span>}
                                    </th>
                                </tr>
                                <tr>
                                    <td class="text-center">@projectindi.HighLandPercent</td>
                                    <td class="text-center">@projectindi.MediumHighLandPercent</td>
                                    <td class="text-center">@projectindi.MediumLowLandPercent</td>
                                    <td class="text-center">@projectindi.LowLandPercent</td>
                                    <td class="text-center">@projectindi.VeryLowLandPercent</td>
                                </tr>
                            </table>
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Land Type (Percent)', 'LandTypePercent');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>উৎপাদিত শস্য</span>}
                                else
                                {<span>Cultivable Crops</span>}
                            </b>
                        </td>
                        <td>@projectindi.CultivableCrops</td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Cultivable Crops', 'CultivableCrops');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>প্রকল্প এলাকার চাষাবাদকৃত এলাকা (হেক্টর)</span>}
                                else
                                {<span>Irrigated Crop Area (ha)</span>}
                            </b>
                        </td>
                        <td>
                            @{
                                var icad = ViewData["IrrigCropAreaDetail"];
                                await Html.RenderPartialAsync("controls/_IrrigatedCropAreaView.cshtml",
                                    new ViewDataDictionary(ViewData) {
                                            { "vFormLanguage", prev_lang },
                                            { "vIrrigCropAreaDetail", icad }});
                            }
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Irrigated Crop Area', 'IrrigatedCropAreaHa');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>ফসল/ খাদ্যশস্য উৎপাদনের পরিমান (টন)</span>}
                                else
                                {<span>Total Crop Production (Ton)</span>}
                            </b>
                        </td>
                        <td>@projectindi.CropProduction</td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Crop Production', 'CropProduction');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>মোট উৎপাদনের পরিমান (টাকায়)</span>}
                                else
                                {<span>Total Amount of Crop Production (Taka)</span>}
                            </b>
                        </td>
                        <td>@projectindi.CropProductionAmount</td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Crop Production Amount (Taka)', 'CropProduction');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>মাছ উৎপাদন, বৈচিত্র্য এবং অভিবাসন</span>}
                                else
                                {<span>Fish Production, Diversity and Migration</span>}
                            </b>
                        </td>
                        <td>
                            @{
                                var fpdd = ViewData["FishProdDivDetail"];
                                await Html.RenderPartialAsync("controls/_FishProductionDiversityView.cshtml",
                                    new ViewDataDictionary(ViewData) {
                                            { "vFormLanguage", prev_lang },
                                            { "vFishProdDivDetail", fpdd }});
                            }
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Fish Production, Diversity and Migration', 'FishProductionDiversityMigration');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>প্রকল্প এলাকায় বিদ্যমান গাছপালা ও পশুপাখি</span>}
                                else
                                {<span>Flora and Fauna</span>}
                            </b>
                        </td>
                        <td>@projectindi.FloraAndFauna</td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Flora and Fauna', 'FloraAndFauna');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>আর্থ সামাজিক অবস্থা</span> }
                                else
                                { <span>Socio Economic Condition</span>}
                            </b>
                        </td>
                        <td>
                            <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                <tr>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>ভূমি হীন জনগোষ্ঠী (শতকরা)</span> }
                                        else
                                        { <span>% of Land Less People</span>}
                                    </th>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>ছোট / প্রান্তিক কৃষক (শতকরা)</span> }
                                        else
                                        { <span>% of Small Farmer</span>}
                                    </th>
                                    <th class="text-center">
                                        @if (prev_lang == 1)
                                        {<span>মাসিক গড় আয়</span> }
                                        else
                                        { <span>Average Monthly Income</span>}
                                    </th>
                                </tr>
                                <tr>
                                    <td>@projectindi.LandLessPeoplePercentage</td>
                                    <td>@projectindi.SmallFarmerPercentage</td>
                                    <td>@projectindi.AvgMonthlyIncome</td>
                                </tr>
                            </table>
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Socio Economic Condition', 'SocioEconomicCondition');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <h5>
                                @if (prev_lang == 1)
                                {<span>২.২ ইস্যু, চ্যালেঞ্জ সমূহ বা সমস্যা</span>}
                                else
                                {<span>2.2 Issue, Challenge or Problem</span>}
                            </h5>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>i. ইস্যু, চ্যালেঞ্জ বা সমস্যার বিবরণ</span>}
                                else
                                {<span>i. Issue, Challenge or Problem Details</span>}
                            </b>
                        </td>
                        <td>@pcd.IssueChallageProblem</td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Issue, Challenge or Problem Details', 'IssueChallageProblem');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <h5>
                                @if (prev_lang == 1)
                                {<span>৩. প্রকল্প প্রণয়ন পর্যায়ে স্টেকহোল্ডারগনের সহিত আলাপ-আলোচনা</span>}
                                else
                                {<span>3. Discussion with stakeholders during starting of the project</span>}
                            </h5>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>i. স্টেকহোল্ডারগনের সহিত আলাপ-আলোচনা</span>}
                                else
                                {<span>i. Discussion with stakeholders</span>}
                            </b>
                        </td>
                        <td>
                            <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                <tr>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>হ্যাঁ</span>}
                                        else
                                        {<span>Yes</span>}
                                    </th>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>না</span>}
                                        else
                                        {<span>No</span>}
                                    </th>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>আবেদনকারীর মন্তব্য</span>}
                                        else
                                        {<span>Applicant Comments</span>}
                                    </th>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>কর্তৃপক্ষের মন্তব্য</span>}
                                        else
                                        {<span>Authority Comments</span>}
                                    </th>
                                </tr>
                                <tr>
                                    @{
                                        string yesTickMark = string.Empty, noTickMark = string.Empty;

                                        if (pcd.YesNoStakeId == 1)
                                        {
                                            yesTickMark = "<span class='fe-check'></span>";
                                            noTickMark = "";
                                        }
                                        else
                                        {
                                            yesTickMark = "";
                                            noTickMark = "<span class='fe-check'></span>";
                                        }

                                        <td class="text-center">@Html.Raw(yesTickMark)</td>
                                        <td class="text-center">@Html.Raw(noTickMark)</td>
                                        <td>@pcd.DiscussWithStakeApplicantCmt</td>
                                        <td>@pcd.DiscussWithStakeAuthorityCmt</td>
                                    }
                                </tr>
                            </table>
                            @if (pcd.YesNoStakeId == 1)
                            {
                                <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                    <thead>
                                        <tr>
                                            <th>
                                                @if (prev_lang == 1)
                                                {<span>আলোচনা সভার ধরণ</span>}
                                                else
                                                {<span>Types of Consultation</span>}
                                            </th>
                                            <th>
                                                @if (prev_lang == 1)
                                                {<span>ইতিবাচক প্রতিক্রিয়া</span>}
                                                else
                                                {<span>Positive Feedback</span>}
                                            </th>
                                            <th>
                                                @if (prev_lang == 1)
                                                {<span>নেতিবাচক প্রতিক্রিয়া</span>}
                                                else
                                                {<span>Negative Feedback</span>}
                                            </th>
                                            <th>
                                                @if (prev_lang == 1)
                                                {<span>অংশগ্রহণকারীদের তালিকা</span>}
                                                else
                                                {<span>Participant list</span>}
                                            </th>
                                            <th>
                                                @if (prev_lang == 1)
                                                {<span>মিটিং মিনিট</span>}
                                                else
                                                {<span>Meeting minutes</span>}
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbodyDiscussionWithStakeholders">
                                        <tr>
                                            <td>
                                                @if (pcd.TypesOfConsultationId.HasValue)
                                                {
                                                    var tocName = _db.LookUpCcModTypesOfConsultation.Find(pcd.TypesOfConsultationId.Value);

                                                    if (prev_lang == 1)
                                                    {<span>@tocName.ConsultationNameBn</span>}
                                                    else
                                                    {<span>@tocName.ConsultationName</span>}
                                                }
                                            </td>
                                            <td>@pcd.DiscussWithStakePosFeedback</td>
                                            <td>@pcd.DiscussWithStakeNegFeedback</td>
                                            <td style="word-break: break-all;"><a href="~/images/CommonDetails/@pcd.DiscussWithStakeParticipntLst" target="_blank">@pcd.DiscussWithStakeParticipntLst</a></td>
                                            <td style="word-break: break-all;"><a href="~/images/CommonDetails/@pcd.DiscussWithStakeMeetingMin" target="_blank">@pcd.DiscussWithStakeMeetingMin</a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            }
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Discussion with Stakeholders During Starting of the Project', 'DiscussionWithstakeholders');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <h5>
                                @if (prev_lang == 1)
                                {<span>৪. উদ্দেশ্য পূরনের অপশনসমূহ বিশ্লেষণ</span>}
                                else
                                {<span>4. Analyze Options to fulfill objective</span>}
                            </h5>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>i. বিকল্পগুলি বিশ্লেষণ করুন</span>}
                                else
                                {<span>i. Analyze Options</span>}
                            </b>
                        </td>
                        <td>
                            <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                <tr>
                                    <th width="10%">
                                        @if (prev_lang == 1)
                                        {<span>হ্যাঁ</span>}
                                        else
                                        {<span>Yes</span>}
                                    </th>
                                    <th width="10%">
                                        @if (prev_lang == 1)
                                        {<span>না</span>}
                                        else
                                        {<span>No</span>}
                                    </th>
                                    <th width="40%">
                                        @if (prev_lang == 1)
                                        {<span>আবেদনকারীর মন্তব্য</span>}
                                        else
                                        {<span>Applicant Comments</span>}
                                    </th>
                                    <th width="40%">
                                        @if (prev_lang == 1)
                                        {<span>কর্তৃপক্ষের মন্তব্য</span>}
                                        else
                                        {<span>Authority Comments</span>}
                                    </th>
                                </tr>
                                <tr>
                                    @{
                                        yesTickMark = string.Empty;
                                        noTickMark = string.Empty;

                                        if (pcd.AnalyzeOptYesNoId == 1)
                                        {
                                            yesTickMark = "<span class='fe-check'></span>";
                                            noTickMark = "";
                                        }
                                        else
                                        {
                                            yesTickMark = "";
                                            noTickMark = "<span class='fe-check'></span>";
                                        }

                                        <td class="text-center">@Html.Raw(yesTickMark)</td>
                                        <td class="text-center">@Html.Raw(noTickMark)</td>
                                        <td>@pcd.AnalyzeOptionsApplicantCmt</td>
                                        <td>@pcd.AnalyzeOptionsAuthorityCmt</td>
                                    }
                                </tr>
                            </table>
                            @if (pcd.AnalyzeOptYesNoId == 1)
                            {
                                <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                    <thead>
                                        <tr>
                                            <th>
                                                @if (prev_lang == 1)
                                                {<span>বিকল্প</span>}
                                                else
                                                {<span>Options</span>}
                                            </th>
                                            <th>
                                                @if (prev_lang == 1)
                                                {<span>বিবরণ</span>}
                                                else
                                                {<span>Description</span>}
                                            </th>
                                            <th>
                                                @if (prev_lang == 1)
                                                {<span>মন্তব্য</span>}
                                                else
                                                {<span>Remarks</span>}
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbodyAnalyzeOptFulfillObjPreview">
                                        @{
                                            foreach (AnalyzeOptionsDetailTemp aod in (List<AnalyzeOptionsDetailTemp>)aodt)
                                            {
                                                if (string.IsNullOrEmpty(aod.Error))
                                                {
                                                    <tr>
                                                        <td>@aod.OptionNumber</td>
                                                        <td>@aod.AnalyzeDescription</td>
                                                        <td>@aod.AnalyzeRemarks</td>
                                                    </tr>
                                                }
                                                else
                                                {
                                                    <tr>
                                                        <td colspan="3">@aod.Error</td>
                                                    </tr>
                                                }
                                            }
                                        }
                                    </tbody>
                                </table>
                            }
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Analyze Options', 'AnalyzeOptionsFulfillObjective');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <h5>
                                @if (prev_lang == 1)
                                {<span>৫. প্রকল্প নথির সাথে ডিজাইন জমা দেওয়া</span>}
                                else
                                {<span>5. Design submitted with project document</span>}
                            </h5>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>i. নথি জমা দেওয়া</span>}
                                else
                                {<span>i. Design Submition</span>}
                            </b>
                        </td>
                        <td>
                            <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                <thead>
                                    <tr>
                                        <th class="text-center">
                                            @if (prev_lang == 1)
                                            {<span>প্যারামিটার</span>}
                                            else
                                            {<span>Parameters</span>}
                                        </th>
                                        <th>
                                            @if (prev_lang == 1)
                                            {<span>হ্যাঁ</span>}
                                            else
                                            {<span>Yes</span>}
                                        </th>
                                        <th>
                                            @if (prev_lang == 1)
                                            {<span>না</span>}
                                            else
                                            {<span>No</span>}
                                        </th>
                                        <th>
                                            @if (prev_lang == 1)
                                            {<span>আবেদনকারীর মন্তব্য</span>}
                                            else
                                            {<span>Applicant Comments</span>}
                                        </th>
                                        <th>
                                            @if (prev_lang == 1)
                                            {<span>কর্তৃপক্ষের মন্তব্য</span>}
                                            else
                                            {<span>Authority Comments</span>}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyDesignSubProjDocPreview">
                                    @{
                                        foreach (DesignSubmitDetailTemp dsdt in (List<DesignSubmitDetailTemp>)dsd)
                                        {
                                            yesTickMark = string.Empty;
                                            noTickMark = string.Empty;

                                            if (dsdt.dswpdYN == 1)
                                            {
                                                yesTickMark = "<span class='fe-check'></span>";
                                                noTickMark = "";
                                            }
                                            else
                                            {
                                                yesTickMark = "";
                                                noTickMark = "<span class='fe-check'></span>";
                                            }

                                            if (string.IsNullOrEmpty(dsdt.Error))
                                            {
                                                <tr>
                                                    <td>
                                                        @if (prev_lang == 1)
                                                        {
                                                            <span>@dsdt.ParameterNameBn</span>
                                                        }
                                                        else
                                                        {
                                                            <span>@dsdt.ParameterNameBn</span>
                                                        }
                                                    </td>
                                                    <td class="text-center">@Html.Raw(yesTickMark)</td>
                                                    <td class="text-center">@Html.Raw(noTickMark)</td>
                                                    <td>@dsdt.DesignSubmitApplicantCmt</td>
                                                    <td>@dsdt.DesignSubmitAuthorityCmt</td>
                                                </tr>
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td colspan="5">@dsdt.Error</td>
                                                </tr>
                                            }
                                        }
                                    }
                                </tbody>
                            </table>
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Design Submitted with Project Document', 'DesignSubmittedWithProjectDocument');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <h5>
                                @if (prev_lang == 1)
                                {<span>৬. পরিবেশগত  ও সামাজিক প্রভাব</span>}
                                else
                                {<span>6. Environmental and Social Impact Assessment</span>}
                            </h5>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>i. প্রভাব মূল্যায়ন</span>}
                                else
                                {<span>i. Impact Assessment</span>}
                            </b>
                        </td>
                        <td>
                            <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                <tr>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>হ্যাঁ</span>}
                                        else
                                        {<span>Yes</span>}
                                    </th>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>না</span>}
                                        else
                                        {<span>No</span>}
                                    </th>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>আবেদনকারীর মন্তব্য</span>}
                                        else
                                        {<span>Applicant Comments</span>}
                                    </th>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>কর্তৃপক্ষের মন্তব্য</span>}
                                        else
                                        {<span>Authority Comments</span>}
                                    </th>
                                </tr>
                                <tr>
                                    @{
                                        yesTickMark = string.Empty;
                                        noTickMark = string.Empty;

                                        if (pcd.EnvAndSocialYesNoId == 1)
                                        {
                                            yesTickMark = "<span class='fe-check'></span>";
                                            noTickMark = "";
                                        }
                                        else
                                        {
                                            yesTickMark = "";
                                            noTickMark = "<span class='fe-check'></span>";
                                        }

                                        <td>@Html.Raw(yesTickMark)</td>
                                        <td>@Html.Raw(noTickMark)</td>
                                        <td>@pcd.EnvAndSocialApplicantCmt</td>
                                        <td>@pcd.EnvAndSocialAuthorityCmt</td>
                                    }
                                </tr>
                            </table>
                        </td>
                        <td>
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Environmental and Social Impact Assessment', 'EnvironmentalAndSocialImpactAssessment');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    @if (pcd.EnvAndSocialYesNoId == 1)
                    {
                        <tr class="text-center">
                            <td colspan="3">
                                <h5>
                                    @if (prev_lang == 1)
                                    {<span>(a) পরিবেশগত প্রভাব মূল্যায়ন</span>}
                                    else
                                    {<span>(a) Environmental Impact Assessment</span>}
                                </h5>
                            </td>
                        </tr>

                        <tr class="text-center">
                            <td colspan="3">
                                <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                    <thead>
                                        <tr>
                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>প্যারামিটার</span>}
                                                else
                                                {<span>Parameters</span>}
                                            </th>
                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>প্রকল্প পূর্ববর্তী পরিস্থিতি</span>}
                                                else
                                                {<span>Pre Project Situation</span>}
                                            </th>

                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>প্রকল্প পরবর্তী পরিস্থিতি</span>}
                                                else
                                                {<span>Post Project Situation</span>}
                                            </th>

                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>ইতিবাচক/ নেতিবাচক প্রভাব</span>}
                                                else
                                                {<span>Positive/ Negative Impact</span>}
                                            </th>

                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>প্রশমন পরিকল্পনা</span>}
                                                else
                                                {<span>Mitigation Plan</span>}
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbodyEIADetailPreview">
                                        @{
                                            foreach (EiaDetailTemp eia in (List<EiaDetailTemp>)eiad)
                                            {
                                                if (string.IsNullOrEmpty(eia.Error))
                                                {
                                                    <tr>
                                                        <td>
                                                            @if (prev_lang == 1)
                                                            {<span>@eia.ParameterNameBn</span>}
                                                        else
                                                        {<span>@eia.ParameterName</span>}
                                                        </td>
                                                        <td>@eia.PreProjectSituation</td>
                                                        <td>@eia.PostProjectSituation</td>
                                                        <td>@eia.PositiveNegativeImpact</td>
                                                        <td>@eia.MitigationPlan</td>
                                                    </tr>
                                                }
                                                else
                                                {
                                                    <tr>
                                                        <td colspan="5">@eia.Error</td>
                                                    </tr>
                                                }
                                            }
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td colspan="5">
                                                <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Environmental Impact Assessment', 'EnvironmentalImpactAssessment');"
                                                   class="btn btn-sm btn-info waves-effect comment" data-close="false"
                                                   data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                                                   style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                                    <i class="mdi mdi-comment-text-multiple"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </td>
                        </tr>

                        <tr class="text-center">
                            <td colspan="3">
                                <h5>
                                    @if (prev_lang == 1)
                                    {<span>(b) সামাজিক প্রভাব মূল্যায়ন</span>}
                                    else
                                    {<span>(b) Social Impact Assessment</span>}
                                </h5>
                            </td>
                        </tr>

                        <tr class="text-center">
                            <td colspan="3">
                                <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                    <tbody>
                                        <tr>
                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>প্যারামিটার</span>}
                                                else
                                                {<span>Parameters</span>}
                                            </th>
                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>প্রকল্প পূর্ববর্তী পরিস্থিতি</span>}
                                                else
                                                {<span>Pre Project Situation</span>}
                                            </th>

                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>প্রকল্প পরবর্তী পরিস্থিতি</span>}
                                                else
                                                {<span>Post Project Situation</span>}
                                            </th>

                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>ইতিবাচক/ নেতিবাচক প্রভাব</span>}
                                                else
                                                {<span>Positive/ Negative Impact</span>}
                                            </th>

                                            <th class="text-center">
                                                @if (prev_lang == 1)
                                                {<span>প্রশমন পরিকল্পনা</span>}
                                                else
                                                {<span>Mitigation Plan</span>}
                                            </th>
                                        </tr>
                                    </tbody>
                                    <tbody id="tbodySIADetailPreview">
                                        @{
                                            foreach (SiaDetailTemp sia in (List<SiaDetailTemp>)siad)
                                            {
                                                if (string.IsNullOrEmpty(sia.Error))
                                                {
                                                    <tr>
                                                        <td>
                                                            @if (prev_lang == 1)
                                                            {<span>@sia.SIAParameterNameBn</span>}
                                                        else
                                                        {<span>@sia.SIAParameterName</span>}
                                                        </td>
                                                        <td>@sia.PreProjectSituation</td>
                                                        <td>@sia.PostProjectSituation</td>
                                                        <td>@sia.PositiveNegativeImpact</td>
                                                        <td>@sia.MitigationPlan</td>
                                                    </tr>
                                                }
                                                else
                                                {
                                                    <tr>
                                                        <td colspan="5">@sia.Error</td>
                                                    </tr>
                                                }
                                            }
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td colspan="5">
                                                <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Social Impact Assessment', 'SocialImpactAssessment');"
                                                   class="btn btn-sm btn-info waves-effect comment" data-close="false"
                                                   data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                                                   style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                                    <i class="mdi mdi-comment-text-multiple"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </td>
                        </tr>
                    }

                    <tr>
                        <td colspan="3">
                            <h4>
                                @if (prev_lang == 1)
                                {<span>৭. প্রকল্পটি তৈরিতে উপযুক্ত ও পরীক্ষিত  বিশ্লেষণি প্রক্রিয়া, মুল্যায়ন পদ্ধতি, কৌশল ও টুলস্ ব্যবহার করা হয়েছে কিনা</span>}
                                else
                                {<span>7. Use of Appropriate tools, technics, analytical procedures etc</span>}
                            </h4>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td style="width: 250px;">
                            <b>
                                @if (prev_lang == 1)
                                {<span>i. প্রকল্পটি তৈরিতে উপযুক্ত ও পরীক্ষিত বিশ্লেষণ প্রক্রিয়া মুল্যায়ন পদ্ধতি</span>}
                                else
                                {<span>i. Use of Appropriate technics, analytical procedures</span>}
                            </b>
                        </td>
                        <td>
                            <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                <tr>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>হ্যাঁ</span>}
                                        else
                                        {<span>Yes</span>}
                                    </th>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>না</span>}
                                        else
                                        {<span>No</span>}
                                    </th>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>আবেদনকারীর মন্তব্য</span>}
                                        else
                                        {<span>Applicant Comments</span>}
                                    </th>
                                    <th>
                                        @if (prev_lang == 1)
                                        {<span>কর্তৃপক্ষের মন্তব্য</span>}
                                        else
                                        {<span>Authority Comments</span>}
                                    </th>
                                </tr>
                                <tr>
                                <tr>
                                    @{
                                        yesTickMark = string.Empty;
                                        noTickMark = string.Empty;

                                        if (projectindi.UseOfToolsYesNoId == 1)
                                        {
                                            yesTickMark = "<span class='fe-check'></span>";
                                            noTickMark = "";
                                        }
                                        else
                                        {
                                            yesTickMark = "";
                                            noTickMark = "<span class='fe-check'></span>";
                                        }

                                        <td>@Html.Raw(yesTickMark)</td>
                                        <td>@Html.Raw(noTickMark)</td>
                                        <td>@projectindi.ToolsApplicantComments</td>
                                        <td>@projectindi.ToolsAuthorityComments</td>
                                    }
                                </tr>
                            </table>
                        </td>
                        <td style="word-break: break-all;">
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Use of Appropriate technics, analytical procedures', 'UseOfAppropriateToolsTechnics');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <h4>
                                @if (prev_lang == 1)
                                {<span>৮. অর্থনৈতিক এবং আর্থিক বিশ্লেষণ</span>}
                                else
                                {<span>8. Economical & Financial Analysis</span>}
                            </h4>
                        </td>
                    </tr>

                    <tr style="vertical-align: top; text-align: left;">
                        <td colspan="3">
                            <table style="width:100%; border: 1px solid #808080; text-align: center;" border="1">
                                <thead>
                                    <tr>
                                        <th class="text-center">
                                            @if (prev_lang == 1)
                                            {<span>তালিকা</span>}
                                            else
                                            {<span>Item</span>}
                                        </th>
                                        <th class="text-center">
                                            @if (prev_lang == 1)
                                            {<span>একক</span>}
                                            else
                                            {<span>Unit</span>}
                                        </th>
                                        <th>
                                            @if (prev_lang == 1)
                                            {<span>আবেদনকারীর মন্তব্য</span>}
                                            else
                                            {<span>Applicant Comments</span>}
                                        </th>
                                        <th>
                                            @if (prev_lang == 1)
                                            {<span>কর্তৃপক্ষের মন্তব্য</span>}
                                            else
                                            {<span>Authority Comments</span>}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyEcoFinAnaPreview">
                                    @{
                                        foreach (EcoFinAnalysisDetailTemp efa in (List<EcoFinAnalysisDetailTemp>)efad)
                                        {
                                            if (string.IsNullOrEmpty(efa.Error))
                                            {
                                                <tr>
                                                    <td>
                                                        @if (prev_lang == 1)
                                                        {
                                                            <span>@efa.EcoAndFinancialParamNameBn</span>
                                                        }
                                                        else
                                                        {
                                                            <span>@efa.EcoAndFinancialParamName</span>
                                                        }
                                                    </td>
                                                    <td>@efa.EcoAndFinancialParamUnit</td>
                                                    <td>@efa.EcoAndFinancialApplicantCmt</td>
                                                    <td>@efa.EcoAndFinancialAuthorityCmt</td>
                                                </tr>
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td colspan="4">@efa.Error</td>
                                                </tr>
                                            }
                                        }
                                    }
                                </tbody>
                            </table>
                        </td>
                    </tr>

                    <tr>
                        <td style="word-break: break-all;" colspan="3">
                            <a href="#control-popup-comments" onclick="javascript:setInfoInPopup('Economical and Financial Analysis', 'EconomicalFinancialAnalysis');"
                               class="btn btn-sm btn-info waves-effect comment" data-close="false"
                               data-animation="fadein" data-plugin="custommodal" data-overlayColor="#38414a"
                               style="margin: 0px !important; padding: 05px !important; line-height: 1 !important;">
                                <i class="mdi mdi-comment-text-multiple"></i>
                            </a>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            @{ await Html.RenderPartialAsync("form/_AdditionalAttachment"); }
                        </td>
                    </tr>

                    @{ await Html.RenderPartialAsync("preview/_4Deed.cshtml",
                                     new ViewDataDictionary(ViewData) {
                                        { "dProjectCommonDetail", pcd},
                                        { "dProjectIndvDetail31", projectindi },
                                        { "dCompatNWPDetail", cnwpd },
                                        { "dCompatNWMPDetail", cnwmpd },
                                        { "dCompatSDGDetail", sdgd },
                                        { "dCompatSDGIndiDetail", sdgid },
                                        { "dBDP2100GoalDetail", bdp2100gd },
                                        { "dGPWMGroupType", gpwmgtd },
                                        { "dFormLanguage", prev_lang },
                                        { "dProjectTypeId", ProjectTypeId }});
                    }

                    @{ await Html.RenderPartialAsync("preview/_5Administrative.cshtml",
                                     new ViewDataDictionary(ViewData) {
                                        { "aProjectCommonDetail", pcd},
                                        { "aProjectIndvDetail31", projectindi },
                                        { "aFormLanguage", prev_lang },
                                        { "aProjectTypeId", ProjectTypeId }});
                    }
                </table>

                    <br />
                    <hr />

                    @{ await Html.RenderPartialAsync("preview/_6Footer.cshtml",
                                        new ViewDataDictionary(ViewData) {
                                        { "fSignatureFileName", sfn},
                                        { "fApplicantNameBn", anbn },
                                        { "fApplicantName", anen },
                                        { "fApplicantGroupName", agne },
                                        { "fFormLanguage", prev_lang },
                                        { "fProjectTypeId", ProjectTypeId }});
                    }

                    <hr />

                    <div class="row justify-content-md-center">
                        @if (is_complete_id == 8 && (app_state_id == 13 || app_state_id == 23 || app_state_id == 33 || app_state_id == 43))
                        {
                            <div class="form-group">
                                <button id="btnSubmitToApprove" class="btn btn-lg btn-success" type="button" style="width: 250px;">
                                    Approve
                                </button>
                            </div>

                            <span>&nbsp;&nbsp;&nbsp;</span>

                            <div class="form-group">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-lg btn-warning dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                        Re-evaluate
                                        <i class="mdi mdi-chevron-down"></i>
                                    </button>
                                    <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 37px, 0px);">
                                        <!--<a id="btnSubmitToApplicant" class="dropdown-item" href="javascript:void(0);">Back to Applicant for Correction</a>-->
                                        <a id="btnSubmitToTechnicalCommittee" class="dropdown-item" href="javascript:void(0);">Back to Technical Committee for Re-evaluation</a>
                                        <a id="btnSubmitToWRMC" class="dropdown-item" href="javascript:void(0);">Back to WRMC for Rechecking</a>
                                    </div>
                                </div>
                            </div>

                            <span>&nbsp;&nbsp;&nbsp;</span>

                            <div class="form-group">
                                <button id="btnSubmitToReject" class="btn btn-lg btn-danger" type="button" style="width: 250px;">
                                    Reject
                                </button>
                            </div>
                        }
                        else
                        {
                            if (app_state_id != 1 && user_group_id != "1000000001")
                            {
                                if (pcd.UndertakingSubmitYesNoId == 1 && (app_state_id == 13 || app_state_id == 23 || app_state_id == 33 || app_state_id == 43))
                                {
                                    <div class="form-group">
                                        <button id="btnReviewUndertaking" class="btn btn-lg btn-blue" type="button" style="width: 250px;">
                                            Review Undertaking
                                        </button>
                                    </div>
                                }
                                else
                                {
                                    <div class="form-group">
                                        <button id="btnSubmitToForward" class="btn btn-lg btn-warning" type="button" style="width: 250px;">
                                            Forward
                                        </button>
                                    </div>
                                }
                            }
                        }

                        <span>&nbsp;&nbsp;&nbsp;</span>

                        <div class="form-group">
                            <a href="@Url.Action("printfcmp", "form", new { id = ViewBag.ProjectId })" class="btn btn-lg btn-primary"
                               style="width: 250px;" target="_blank">
                                Print
                            </a>
                        </div>
                    </div>

                    <div id="control-popup-comments" class="modal-demo" style="width: 800px;">
                        <div class="modal-dialog" style="">
                            <div class="modal-content">
                                <div class="modal-header" style="padding: 0px !important;">
                                    <h4 id="control-name-for-title" class="modal-title text-center">Project Name</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                </div>
                                <div class="modal-body p-0" style="padding-left: 0px !important; padding-right: 0px !important;
                                max-height: 400px; overflow-x: hidden; overflow-y: auto;">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="table mb-0 p-0" style="width: 100%; border-color: none;">
                                                <thead>
                                                    <tr style="border-top: none;">
                                                        <th class="p-1">Comments</th>
                                                        <th class="p-1">User</th>
                                                        <th class="p-1">Date of Analysis</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tbodyCommentList"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer" style="padding-left: 0px !important; padding-right: 0px !important;">
                                    <input id="LabelNameOfControl" type="hidden" />
                                    <textarea id="Comments" name="Comments" class="form-control" rows="3" placeholder="Write your comments here"></textarea>
                                    <button id="btnPopupCommentsSave" type="button" class="btn btn-info waves-effect waves-light">
                                        <i class="mdi mdi-content-save"></i>
                                    </button>
                                    <button id="btnPopupClear" type="button" class="btn btn-danger waves-effect" data-dismiss="modal" onclick="Custombox.modal.close();">
                                        <i class="mdi mdi-close-outline"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Popup for Comments -->
<script type="text/javascript">
    jQuery(document).ready(function () {
        var app_state_id = '@app_state_id';
        var is_complete_id = '@is_complete_id';
        var group_id = '@ViewData["UserLevel"].ToString()';

        if (group_id != '' && group_id != undefined && group_id != null) {
            if (group_id == 1000000001) {
                $('.comment').addClass('d-none');
            }
        } else {
            $('.comment').addClass('d-none');
        }

        if (app_state_id == 13 || app_state_id == 23 || app_state_id == 33 || app_state_id == 43) {
            if (is_complete_id < 3) {
                $('.comment').addClass('d-none');
            } else {
                $('.comment').removeClass('d-none');
            }

            if (group_id == 1000000001) {
                $('.comment').addClass('d-none');
            }
        }

        jQuery('#btnPopupCommentsSave').click(function () {
            SaveProjComments();
        });

        jQuery('#btnPopupClear').click(function () {
            jQuery('#control-name-for-title').text('');
            jQuery('#LabelNameOfControl').val('');
            jQuery('#Comments').val('');
        });

        jQuery('#btnMapView').click(function () {
            var prevProjId = GetHiddenValue('pProjectId');
            var url = '@Url.Action("viewLocation", "map", new { projectId = "__id__" })';
            window.open(url.replace('__id__', prevProjId), '_blank');
        });

        jQuery("#btnSubmitToForward").click(function () {
            var app_state = '@app_state';
            var popup_msg = '';
            popup_msg = 'Application will be forwarded to ' + app_state;

            Swal.fire({
                title: "Are you sure?",
                text: popup_msg,
                type: "warning",
                allowEscapeKey: false,
                allowOutsideClick: false,
                showCancelButton: !0,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, Forward"
            }).then(function (t) {
                if (t.value == true) {
                    var projectId = GetHiddenValue('pProjectId');

                    var url = '@Url.Action("fwapp", "form")';
                    jQuery.ajax({
                        type: "POST",
                        url: url,
                        data: { pid: projectId },
                        dataType: "json",
                        success: function (data, status, jqXHR) {
                            if (data.message != '') {
                                Notification(data.status, data.title, data.message);
                                Swal.fire(data.title, data.message, data.status);
                            }

                            if (data.status == 'success') {
                                jQuery("#btnSubmitToForward").prop("disabled", true);
                            } else {
                                jQuery("#btnSubmitToForward").prop("disabled", false);
                            }
                        }, error: function (jqXHR, exception) {
                            var errorMsg = AjaxErrorHandle(jqXHR, exception);
                            Notification('error', 'Error Occured', errorMsg);
                            Swal.fire('Error Occured', errorMsg, 'error');
                        }
                    });
                }
            });
        });

        jQuery("#btnSubmitToApprove").click(function () {
            Swal.fire({
                title: "Are you sure?",
                text: "Application will be approved. \nYou will not be able to comment or analyze anything.",
                type: "warning",
                allowEscapeKey: false,
                allowOutsideClick: false,
                showCancelButton: !0,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, Approve"
            }).then(function (t) {
                if (t.value == true) {
                    var projectId = GetHiddenValue('pProjectId');

                    var url = '@Url.Action("appaprv", "form")';
                    jQuery.ajax({
                        type: "POST",
                        url: url,
                        data: { pid: projectId },
                        dataType: "json",
                        success: function (data, status, jqXHR) {
                            if (data.message != '') {
                                Notification(data.status, data.title, data.message);
                                Swal.fire(data.title, data.message, data.status);

                                if (data.status == 'success') {
                                    RedirectToHome();
                                }
                            }
                        }, error: function (jqXHR, exception) {
                            var errorMsg = AjaxErrorHandle(jqXHR, exception);
                            Notification('error', 'Error Occured', errorMsg);
                            Swal.fire('Error Occured', errorMsg, 'error');
                        }
                    });
                }
            });
        });

        jQuery("#btnSubmitToReject").click(function () {
            Swal.fire({
                title: "Are you sure?",
                html: 'Application will be rejected. Do you wish to continue? <br /> <div class="form-group"><label for="txtRejectReason"><span class="badge badge-info">Please Specify Reject Reason</span> <span class="text-danger bold">*</span></label><input type="text" id="txtRejectReason" name="txtRejectReason" class="form-control"></div>',
                type: "warning",
                allowEscapeKey: false,
                allowOutsideClick: false,
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, Reject"
            }).then(function (t) {
                var projectId = GetHiddenValue('pProjectId');
                var reason = jQuery("#txtRejectReason").val();

                if (t.value == true) {
                    if (reason != '') {
                        var url = '@Url.Action("apprejt", "form")';

                        jQuery.ajax({
                            type: "POST",
                            url: url,
                            data: { pid: projectId, reason: reason },
                            dataType: "json",
                            success: function (data, status, jqXHR) {
                                console.log(data);
                                if (data.message != '') {
                                    Notification(data.status, data.title, data.message);
                                    Swal.fire(data.title, data.message, data.status);

                                    if (data.status == 'success') {
                                        RedirectToHome();
                                    }
                                }
                            }, error: function (jqXHR, exception) {
                                var errorMsg = AjaxErrorHandle(jqXHR, exception);
                                Notification('error', 'Error Occured', errorMsg);
                                Swal.fire('Error Occured', errorMsg, 'error');
                            }
                        });
                    } else {
                        Swal.fire('Required', 'Reject reason is required!', 'error');
                        //Notification('error', 'Required', 'Reject reason is required!');
                        jQuery("#txtRejectReason").focus();
                    }
                }
            });
        });

        jQuery("#btnSubmitToApplicant").click(function () {
            Swal.fire({
                title: "Are you sure?",
                html: 'This application will be sent to applicant for correction purpose. <br /> <div class="form-group"><label for="txtRejectReason"><span class="badge badge-info">Please Specify Reason</span> <span class="text-danger bold">*</span></label><input type="text" id="txtRejectReason" name="txtRejectReason" class="form-control"></div>',
                type: "warning",
                allowEscapeKey: false,
                allowOutsideClick: false,
                showCancelButton: !0,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, Send"
            }).then(function (t) {
                var projectId = GetHiddenValue('pProjectId');
                var reason = jQuery("#txtRejectReason").val();

                if (t.value == true) {
                    if (reason != '') {
                        var url = '@Url.Action("appreeva", "form")';
                        jQuery.ajax({
                            type: "POST",
                            url: url,
                            data: { pid: projectId, level: 'applicant', reason: reason },
                            dataType: "json",
                            success: function (data, status, jqXHR) {
                                if (data.message != '') {
                                    Notification(data.status, data.title, data.message);
                                    Swal.fire(data.title, data.message, data.status);

                                    if (data.status == 'success') {
                                        RedirectToHome();
                                    }
                                }
                            }, error: function (jqXHR, exception) {
                                var errorMsg = AjaxErrorHandle(jqXHR, exception);
                                Notification('error', 'Error Occured', errorMsg);
                                Swal.fire('Error Occured', errorMsg, 'error');
                            }
                        });
                    } else {
                        Swal.fire('Required', 'Reason is required!', 'error');
                        //Notification('error', 'Required', 'Reject reason is required!');
                        jQuery("#txtRejectReason").focus();
                    }
                }
            });
        });

        jQuery("#btnSubmitToWRMC").click(function () {
	        Swal.fire({
		        title: "Are you sure?",
		        html: 'This application will be sent to Integrated Water Resource Management Committee for re-checking purpose.',
		        type: "warning",
		        allowEscapeKey: false,
		        allowOutsideClick: false,
		        showCancelButton: !0,
		        confirmButtonColor: "#3085d6",
		        cancelButtonColor: "#d33",
		        confirmButtonText: "Yes, Send"
	        }).then(function (t) {
		        var projectId = GetHiddenValue('pProjectId');

		        if (t.value == true) {
				    var url = '@Url.Action("appreevatoiwrmc", "form")';
				    jQuery.ajax({
					    type: "POST",
					    url: url,
                        data: { pid: projectId },
					    dataType: "json",
					    success: function (data, status, jqXHR) {
						    if (data.message != '') {
							    Notification(data.status, data.title, data.message);
                                Swal.fire(data.title, data.message, data.status);

                                if (data.status == 'success') {
                                    RedirectToHome();
                                }
						    }
					    }, error: function (jqXHR, exception) {
						    var errorMsg = AjaxErrorHandle(jqXHR, exception);
						    Notification('error', 'Error Occured', errorMsg);
						    Swal.fire('Error Occured', errorMsg, 'error');
					    }
				    });
		        }
	        });
        });

        jQuery("#btnSubmitToTechnicalCommittee").click(function () {
	        Swal.fire({
		        title: "Are you sure?",
		        html: 'This application will be sent to Technical Committee for re-evaluation purpose.',
		        type: "warning",
		        allowEscapeKey: false,
		        allowOutsideClick: false,
		        showCancelButton: !0,
		        confirmButtonColor: "#3085d6",
		        cancelButtonColor: "#d33",
		        confirmButtonText: "Yes, Send"
	        }).then(function (t) {
		        var projectId = GetHiddenValue('pProjectId');

		        if (t.value == true) {
				    var url = '@Url.Action("appreevatotc", "form")';
				    jQuery.ajax({
					    type: "POST",
					    url: url,
                        data: { pid: projectId },
					    dataType: "json",
					    success: function (data, status, jqXHR) {
                            if (data.message != '') {
							    Notification(data.status, data.title, data.message);
                                Swal.fire(data.title, data.message, data.status);

                                if (data.status == 'success') {
                                    RedirectToHome();
                                }
						    }
					    }, error: function (jqXHR, exception) {
						    var errorMsg = AjaxErrorHandle(jqXHR, exception);
						    Notification('error', 'Error Occured', errorMsg);
						    Swal.fire('Error Occured', errorMsg, 'error');
					    }
				    });
		        }
	        });
        });

        jQuery("#btnReviewUndertaking").click(function () {
            var projectId = GetHiddenValue('pProjectId');
            var popupWinWidth = 850;
            var popupWinHeight = 600;
            var left = (screen.width - popupWinWidth) / 2;
            var top = (screen.height - popupWinHeight) / 4;

            if (projectId != '') {
                if (window.screen) {
                    w = window.screen.availWidth;
                    h = window.screen.availHeight;
                }

                var url = '@Url.Action("undertaking", "certificate", new { id = ProjectId, lang = 1 })'; //pcd.LanguageId
                window.open(url, 'Review Undertaking', 'height=' + popupWinHeight + ',width=' + popupWinWidth + ',left=' + left + ',top=' + top + ',status=no,toolbar=no,resizable=yes,scrollbars=yes,fullscreen=yes');
            } else {
                Notification('error', 'Ivalid Project ID', 'Ivalid project ID found!');
            }
        });
    });

    function GetTextValue(control) {
            return jQuery('#' + control).val();
    }

    function SetTextValue(control, val) {
        return jQuery('#' + control).val(val);
    }

    function GetRadioValue(control) {
            var value = $("input[name='" + control + "']:checked").val();
            return (value == undefined || value == '') ? 0 : value;
    }

    function GetHiddenValue(control) {
        return jQuery('#' + control).val();
    }

    function CommentsClear() {
        jQuery('#Comments').val('');
    }

    function setInfoInPopup(title, label) {
        jQuery('#control-name-for-title').text(title);
        jQuery('#LabelNameOfControl').val(label);

        GetProjComments();
    }

    function SaveProjComments() {
        var prevUserId = GetHiddenValue('pUserId');
        var prevProjTypeId = GetHiddenValue('pProjectTypeId');
        var prevProjId = GetHiddenValue('pProjectId');
        var prevControlName = jQuery('#LabelNameOfControl').val();
        var prevComments = jQuery('#Comments').val();

        var pda = {
            UserId: prevUserId,
            ProjectTypeId: prevProjTypeId,
            ProjectId: prevProjId,
            LabelNameOfControl: prevControlName,
            Comments: prevComments
        };

        console.log(pda);

        var url = '@Url.Action("sfc", "form")';
        jQuery.ajax({
            type: "POST",
            url: url,
            data: { pda: pda },
            dataType: "json",
            success: function (data, status, jqXHR) {
                //console.log('Preview Comments Loading...');
                //console.log(data);

                if (data.status == 'success') {
                    Notification('success', 'Success', data.message);
                    GetProjComments();
                    CommentsClear();
                } else {
                    Notification('error', 'Saving Error', data.message);
                }
            }, error: function (jqXHR, exception) {
                var errorMsg = AjaxErrorHandle(jqXHR, exception);
                Notification('error', 'Saving Error', errorMsg);
            }
        });
    }

    function GetProjComments() {
        var prevUserId = GetHiddenValue('pUserId');
        var prevProjTypeId = GetHiddenValue('pProjectTypeId');
        var prevProjId = GetHiddenValue('pProjectId');
        var prevControlName = jQuery('#LabelNameOfControl').val();

        var url = '@Url.Action("gfc", "form")';

        jQuery.ajax({
            type: "GET",
            url: url,
            data: { userid: prevUserId, projtypeid: prevProjTypeId, projid: prevProjId, controlname: prevControlName},
            dataType: "json",
            success: function (data, status, jqXHR) {
                console.log('Preview Comments Loading...');
                console.log(data);

                if (data.length > 0) {
                    var rows = '';

                    jQuery.each(data, function (i, item) {
                        rows += '<tr><td class="p-1" data-id="' + item.appProjDataAnalysisId + '">' + item.userComments + '</td><td class="p-1">' + item.userName + '</td><td class="p-1">' + item.dateOfAnalysis + '</td></tr>';

                        if (item.userId == prevUserId) {
                            jQuery('#Comments').val(item.userComments);
                        }
                    });

                    jQuery("#tbodyCommentList").html(rows);
                } else {
                    jQuery("#tbodyCommentList").html('<tr><td colspan="3" class="text-center text-red"><div class="alert alert-warning" role="alert"> Sorry, no comments found </div></td></tr>');
                }
            }, error: function (jqXHR, exception) {
                var errorMsg = AjaxErrorHandle(jqXHR, exception);
                jQuery("#tbodyCommentList").html('<tr><td colspan="3" class="text-center text-red"><div class="alert alert-danger" role="alert">' + errorMsg + '</div></td></tr>');
            }
        });
    }

    function Delete(id, projectId, modelName) {
            Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this",
                type: "warning",
                allowEscapeKey: false,
                allowOutsideClick: false,
                showCancelButton: !0,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Sure"
            }).then(function (t) {
                if (t.value == true) {
                    var url = '@Url.Action("cdm", "form")';
                    jQuery.ajax({
                        type: "POST",
                        url: url,
                        data: { id: id, projectId: projectId, modelName: modelName },
                        dataType: "json",
                        success: function (data, status, jqXHR) {
                            if (data.status == 'success') {
                                Notification('success', 'Success', data.message);
                                Swal.fire("Success", data.message, "success");
                            } else {
                                Notification('error', 'Deletion Error', data.message);
                                Swal.fire("Deletion Error", data.message, "error");
                            }
                        }, error: function (jqXHR, exception) {
                            var errorMsg = AjaxErrorHandle(jqXHR, exception);
                            Notification('error', 'Error Occured', errorMsg);
                        }
                    });
                }
            });
    }

    function RedirectToHome() {
        var url = '@Url.Action("list", "form")';
        window.location.href = url;
    }
</script>
<!-- end -->